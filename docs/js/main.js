function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}jQuery;var API="/app/ajax/";Inputmask.extendDefinitions({f:{validator:"[0-7|9]"}});var phoneMask="+7 (f99) 999-99-99",scrollBarWidth=getScrollbarWidth();function getScrollbarWidth(){return window.innerWidth-document.documentElement.clientWidth}$.noConflict(),jQuery(document).ready(function(e){if(e("body").removeClass("pageload"),"function"!=typeof Promise)document.createElement("picture"),o="/js/polyfills/browser.js",a=r,(i=document.createElement("script")).src=o,i.onload=function(){a()},i.onerror=function(){throw new Error("Failed to load script "+o)},document.head.appendChild(i);else{var t=performance.now();r();var n=performance.now();console.log("globalInitFunction took "+Math.floor(n-t)+"ms.")}var o,a,i;function r(){e.fancybox.defaults.hash=!1;var t,n,o,a,i,r,c,s,l=function(e,t,n){var o;return function(){var a=this,i=arguments,r=n&&!o;clearTimeout(o),o=setTimeout(function(){o=null,n||e.apply(a,i)},t),r&&e.apply(a,i)}};function d(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{processData:!0,contentType:"application/x-www-form-urlencoded"};return new Promise(function(a,i){e.ajax({url:API+t,type:"POST",data:n,processData:o.processData,contentType:o.contentType,success:function(e){var t=function(e){var t;try{t=JSON.parse(e)}catch(e){}return t}(e);a(t)},error:function(e){i(e)}})})}function f(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=e(t).offset().top;e("html, body").animate({scrollTop:a-o},n)}Inputmask.extendDefinitions({f:{validator:"[0-7|9]"}}),e("[data-scroll-to]").on("click",function(t){var n=e(this),o=n.data("scroll-to"),a=e("#".concat(o)),i=n.data("scroll-offset")||0;1===a.length&&f(a,300,i)}),t=e(".authorization__toggle"),n=e(".authorization__logged"),o=e(".authorization__list"),n.on("click",function(){t.toggleClass("active"),o.hasClass("active")?(o.slideUp(),o.removeClass("active")):(o.slideDown(),o.addClass("active"))}),a=e(".base-input__input"),i=e(".base-input-autocomplete"),a.each(function(){""!==e(this).val().trim()&&e(this).addClass("hasValue"),e(this).on("blur",function(){""!==e(this).val().trim()?e(this).addClass("hasValue"):e(this).removeClass("hasValue")})}),i.each(function(){var t=e(this).find("input"),n=e(this).find("label");t.on("focus",function(){n.addClass("js-focus")}),t.on("blur",function(){n.removeClass("js-focus")})}),r=e(".base-select__input"),c=e(".base-select__options-list"),s=e(".base-select__options-item"),0!=r.length&&(""!==r.val().trim()&&r.addClass("hasValue"),r.on("blur",function(){""!==r.val().trim()?r.addClass("hasValue"):r.removeClass("hasValue")}),r.on("click",function(){r.parent().addClass("active"),c.slideDown()}),e(document).on("click",function(e){r.parent().hasClass("active")&&e.target!==r&&0===r.parent().has(e.target).length&&(r.parent().removeClass("active"),c.slideUp())}),s.each(function(){e(this).on("click",function(t){var n=e(this).text();r.val(n),r.addClass("hasValue"),r.parent().removeClass("active"),c.slideUp()})})),function(){var t=e(".best-object-card");if(0!==t.length){var n=["#1cb96f","#fed63f","#ffa30c"];t.each(function(t,o){var a=parseInt(e(o).data("rate")),i=e(o).find(".best-object-card__rate");a>=80?i.css("color",n[0]):a<80&&a>=50?i.css("color",n[1]):i.css("color",n[2]),e(o).css("top","calc(".concat(100-a,"% + ").concat(8,"px"))})}}(),0!==e(".best-objects").length&&e(".best-objects__objects").slick({rows:0,slidesToScroll:1,slidesToShow:1,arrows:!0,mobileFirst:!0,infinite:!1,responsive:[{breakpoint:767,settings:{slidesToShow:2}},{breakpoint:1023,settings:{slidesToShow:2.25}},{breakpoint:1199,settings:{slidesToShow:3}}]}),0!==e(".contacts").length&&ymaps.ready(function(){var e=new ymaps.Map("map",{center:[55.749511,37.537083],zoom:15,controls:["zoomControl"]}),t=new ymaps.Placemark([55.749511,37.537083],{hintContent:"123112, Москва, Пресненская наб., д. 12, МФК «Федерация Восток»",balloonContent:"123112, Москва, Пресненская наб., д. 12, МФК «Федерация Восток»"},{preset:"islands#icon",iconColor:"#fed63f"});e.behaviors.disable("scrollZoom"),e.geoObjects.add(t)}),function(){if(0!==e(".faq").length){var t=e(".faq__questions-link"),n=e(".faq__answer"),o=e(".faq__content"),a=0;a=window.matchMedia("(max-width: 768px)").matches?50:150,t.on("click",function(i){i.preventDefault();var r=e(this);if(!r.hasClass("active")){var c=n.filter(".active"),s=t.filter(".active"),l=r.data("target"),d=n.filter("#"+l);s.removeClass("active"),c.fadeOut(300,function(){c.removeClass("active"),r.addClass("active"),d.addClass("active"),d.fadeIn(300),f(o,300,a)})}})}}();var u,v,p,m=document.querySelectorAll(".application-trigger");m.length>0&&m.forEach(function(t){t.addEventListener("click",function(t){MicroModal.show("applicationModal",{disableScroll:!0,awaitCloseAnimation:!0,onShow:function(t){!function(e){e.children[0].style.paddingRight=scrollBarWidth+"px",document.body.style.paddingRight=scrollBarWidth+"px"}(t),function(t){var n=t.querySelector(".modal__form"),o=n.querySelectorAll("input");console.log(o);e("#applicationEmail");var a=e("#applicationPhone"),i="+7 (f99) 999-99-99";a.inputmask({mask:i,showMaskOnHover:!1}),o.forEach(function(t){return t.addEventListener("focus",function(){return function(t){var n=e(t),o=n.siblings(".error");n.removeClass("error"),o.slideUp(200)}(t)})}),n.addEventListener("submit",function(t){if(t.preventDefault(),s=a.val(),!Inputmask.isValid(s,{mask:i}))return o="Неверно указан телефон",r=e(a),c=r.siblings(".error"),r.addClass("error"),c.text(o),void c.slideDown(200);var o,r,c,s,l=e(n).serialize();d("url",l).then(function(e){MicroModal.close("applicationModal")})})}(t)},onClose:function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.children[0].style.paddingRight="",document.body.style.paddingRight="",t&&e.addEventListener("animationend",function e(){this.remove(),this.removeEventListener("animationend",e)})}(e,!1)}})})}),u=e(".main-header__navigation"),e(".hamburger").click(function(){e(this).toggleClass("active"),u.toggleClass("active"),e("body").toggleClass("menu-opened")}),0!==(v=e(".index-slider, .index-bottom__slider")).length&&v.each(function(t,n){e(n).slick({rows:0,slidesToScroll:1,slidesToShow:1,arrows:!0})}),p=e(".main-nav__link.has-subnav"),window.matchMedia("(max-width: 1024px)").matches&&p.on("click",function(t){t.preventDefault(),e(this).next().slideToggle(300)}),function(){if(document.querySelector(".object-calc")){var t,n,o,a=document.querySelector(".object-calc__investment-range"),i=document.querySelector(".object-calc__investment-value"),r=document.querySelector(".object-calc__income-range"),c=wNumb({decimals:0,suffix:" ₽",thousand:" "}),s=1e6,l=e(".object-calc__income-data"),d=l.find(".object-calc__income"),f=l.find(".object-calc__share"),u=l.find(".object-calc__rate").data("rate"),v=l.data("step");t=l.data("min"),n=l.data("max"),o=l.data("step"),noUiSlider.create(a,{start:s,step:o,animate:!1,connect:"lower",range:{min:t,max:n}}),function(e,t,n,o,a){var i=e*a/100,c=t*a/100,s=o*a/100,l=n*a/100;noUiSlider.create(r,{start:s,step:l,animate:!1,range:{min:i,max:c}})}(t,n,o,s,u),a.noUiSlider.on("update",function(e,t){var n;i.textContent=c.to(+e[t]),n=e[t],f.text(Math.floor(n/v)),d.text(c.to(n*u/100/12)),function(e){r.noUiSlider.set(e*u/100)}(e[t])}),r.noUiSlider.on("slide",function(e,t){var n;n=e[t],a.noUiSlider.set(n/u*100)}),a.noUiSlider.on("change",function(){p()}),r.noUiSlider.on("change",function(){p()})}function p(){var t=e(".noUi-connect"),n=e(".noUi-origin");t.addClass("transition"),n.addClass("transition"),setTimeout(function(){t.removeClass("transition"),n.removeClass("transition")},300)}}(),tippy(".object-card__tooltip",{placement:"bottom",arrow:'<svg xmlns="http://www.w3.org/2000/svg" width="13" height="6" fill="none"><path d="M5.094 1.265a2 2 0 012.723 0L12.911 6H0l5.094-4.735z" fill="#fed63f"/></svg>'}),function(){if(0!==e(".object-finances").length){var t=document.querySelector(".object-finances__table"),n=document.querySelector("#lineChart"),o=parseInt(window.getComputedStyle(n.parentNode).paddingLeft),a=null,i=document.querySelector("#columnChart"),r=parseInt(window.getComputedStyle(i.parentNode).paddingLeft),c=null,s=t.querySelectorAll("tr:not(:first-child) td"),d=s[0].getBoundingClientRect().height,f=s[1].getBoundingClientRect().width;s[0].getBoundingClientRect().width;console.log(f);var u=document.querySelector(".object-finances__hr"),v=document.querySelector(".object-finances__vr"),p="12px",m=!1;window.matchMedia("(min-width: 1024px)").matches&&(p="14px",m=!0),s.forEach(function(e){e.addEventListener("mouseover",function(){var n=e.offsetParent.offsetTop+e.offsetTop+d;u.style.top="".concat(n,"px");var o=-5;1===_toConsumableArray(e.parentNode.children).indexOf(e)&&(o=parseInt(window.getComputedStyle(e).paddingLeft)-5);var a=e.offsetParent.offsetLeft+e.offsetLeft+o-t.scrollLeft;v.style.left="".concat(a,"px"),u.classList.add("active"),v.classList.add("active")}),e.addEventListener("mouseout",function(){u.classList.remove("active"),v.classList.remove("active")})});var h=document.querySelector(".object-finances__scroll-next"),g=document.querySelector(".object-finances__scroll-prev"),b=t.scrollWidth-t.clientWidth;console.log("maxScrollLeft: ",b);var _=l(function(){var e=t.scrollLeft+f;e>0&&g.classList.add("active");e>=b-f&&h.classList.remove("active");k(e)},200,!0),y=l(function(){var e=t.scrollLeft-f;k(e),e<=0&&g.classList.remove("active");e<=b&&h.classList.add("active")},200,!0);if(h.addEventListener("click",_),g.addEventListener("click",y),n){var w=[7,6.9,9.5,14.5,18.4,21.5,25.2,26.5,23.3,18.3,13.9,null],S=f,C=S*w.length;Highcharts.chart("lineChart",{chart:{type:"line",scrollablePlotArea:{minWidth:C},marginTop:60},title:!1,credits:{enabled:!1},xAxis:{categories:["Декабрь 2017","Январь 2018","Февраль 2018","Март 2018","Апрель 2018","Май 2018","Июнь 2018","Июль 2018","Август 2018","Сентябрь 2018","Октябрь 2018",""],opposite:!0,tickPixelInterval:S,width:S*w.length,gridLineColor:"#197F07",offset:30,lineWidth:0,tickWidth:0,labels:{align:"left",style:{color:"#9e9e9e",fontSize:p,fontWeight:"600",fontFamily:"Montserrat, Helvetica, Arial, sans-serif;",paddingLeft:"5px"}}},yAxis:{title:!1,gridLineColor:"#f2f2f2",labels:{padding:5,style:{color:"#9e9e9e",fontSize:p,fontWeight:"600",fontFamily:"Montserrat, Helvetica, Arial, sans-serif;",paddingLeft:"5px"}}},plotOptions:{line:{color:"#fed63f",dataLabels:{enabled:!1}},series:{point:{events:{mouseOver:function(e){var t=e.target;if(m){v.style.left="".concat(t.clientX+o+34-a.scrollLeft,"px"),v.classList.add("active")}},mouseOut:function(){v.classList.remove("active")}}}}},tooltip:{enabled:!1},series:[{data:w}],legend:!1}),a=n.querySelector(".highcharts-scrolling")}if(i){var x=[7,6.9,9.5,14.5,18.4,21.5,25.2,26.5,23.3,18.3,13.9,null],j=f,L=j*x.length;Highcharts.chart("columnChart",{chart:{type:"column",scrollablePlotArea:{minWidth:L},marginTop:60},title:!1,credits:{enabled:!1},xAxis:{categories:["Декабрь 2017","Январь 2018","Февраль 2018","Март 2018","Апрель 2018","Май 2018","Июнь 2018","Июль 2018","Август 2018","Сентябрь 2018","Октябрь 2018",""],opposite:!0,tickPixelInterval:j,width:j*x.length,offset:30,lineWidth:0,tickWidth:0,labels:{align:"left",style:{color:"#9e9e9e",fontSize:p,fontWeight:"600",fontFamily:"Montserrat, Helvetica, Arial, sans-serif;",paddingLeft:"5px"}}},yAxis:{title:!1,gridLineColor:"#f2f2f2",labels:{padding:5,style:{color:"#9e9e9e",fontSize:p,fontWeight:"600",fontFamily:"Montserrat, Helvetica, Arial, sans-serif;",paddingLeft:"5px"}}},plotOptions:{column:{color:"#d8d8d8",dataLabels:{enabled:!1},pointWidth:122,pointPlacement:.37}},tooltip:{enabled:!1},series:[{data:x,states:{hover:{color:"#fed63f"}},point:{events:{mouseOver:function(e){var t=e.target;if(m){v.style.left="".concat(t.clientX-t.pointWidth/2+r+41-c.scrollLeft,"px"),v.classList.add("active")}},mouseOut:function(){v.classList.remove("active")}}}}],legend:!1}),c=i.querySelector(".highcharts-scrolling")}}function k(e){t.scrollTo({left:e,behavior:"smooth"}),a.scrollTo({left:e,behavior:"smooth"}),c.scrollTo({left:e,behavior:"smooth"})}}(),0!==e(".object-location").length&&ymaps.ready(function(){var e=new ymaps.Map("map",{center:[55.749511,37.537083],zoom:15,controls:["zoomControl"]}),t=new ymaps.Placemark([55.749511,37.537083],{hintContent:"123112, Москва, Пресненская наб., д. 12, МФК «Федерация Восток»",balloonContent:"123112, Москва, Пресненская наб., д. 12, МФК «Федерация Восток»"},{preset:"islands#icon",iconColor:"#fed63f"});e.behaviors.disable("scrollZoom"),e.geoObjects.add(t)}),0!==e(".object-plans").length&&e(".object-plans__slider").slick({rows:0,slidesToScroll:1,slidesToShow:1,arrows:!0}),0!==e(".object-slider").length&&(e(".object-slider__slider").slick({rows:0,slidesToScroll:1,slidesToShow:1,arrows:!0}),e(".object-slider__play").modalVideo()),function(){if(0!==e(".object").length){var t=e(".object__navigation-link"),n=document.querySelectorAll(".object__section");if(window.matchMedia("(min-width: 768px)").matches){var o=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){t.removeClass("active");var n=e.target.id;if(!n)return;t.filter("[data-scroll-to=".concat(n,"]")).addClass("active")}})},{rootMargin:"-50% 0% -50% 0%",root:null});n.forEach(function(e){return o.observe(e)})}t.on("click",function(n){n.preventDefault();var o=e(this);t.removeClass("active"),o.addClass("active")})}}(),function(){if(document.querySelector(".partners-wrapper")){var e=_toConsumableArray(document.querySelectorAll(".partners-wrapper__step")),t=[document.querySelector(".partners-choice"),document.querySelector(".partners-status"),document.querySelector(".partners-income")];!function(){var n={rootMargin:"0px 0px -90% 0px",root:null,threshold:0};if("IntersectionObserver"in window){var o=new IntersectionObserver(function(n){n.forEach(function(n){var o=n.isIntersecting;if(o){var a=t.indexOf(n.target),i=e.find(function(e){return e.classList.contains("active")}),r=e.indexOf(i);if(r===a)return;i.classList.remove("active");var c=e[a];c.classList.add("active")}})},{rootMargin:n.rootMargin,root:n.root,threshold:n.threshold});t.forEach(function(e){return o.observe(e)})}else setTimeout(function(){items.forEach(function(e){e.classList.add("animated")})},300)}()}}(),function(){var t=document.querySelector(".profit-calc");if(t){var n,o,a,i,r,c=document.querySelector(".profit-calc__investment-range"),s=document.querySelector(".profit-calc__investment-value"),l=document.querySelector(".profit-calc__income-range"),d=wNumb({decimals:0,suffix:" ₽",thousand:" "}),f=e(".profit-calc__objects-nav"),u=e(".profit-calc__objects-slider"),v=1e6;n=e(e(t).find(".profit-object")[0]),o=n.data("min"),a=n.data("max"),i=n.data("step"),r=n.find(".profit-object__rate").data("rate"),noUiSlider.create(c,{start:v,step:i,animate:!1,connect:"lower",range:{min:o,max:a}}),p(n,v),function(e,t,n,o,a){var i=e*a/100,r=t*a/100,c=o*a/100,s=n*a/100;noUiSlider.create(l,{start:c,step:s,animate:!1,range:{min:i,max:r}})}(o,a,i,v,r),u.on("init",function(t,n){var o=e(n.$slides[n.currentSlide]);p(e(o.children()[0]),v)}),u.on("beforeChange",function(t,n,o,a){if(o!==a){var i=e(n.$slides[a]),r=e(i.children()[0]),s=r.data("min"),d=r.data("max"),f=r.data("step"),u=r.find(".profit-object__rate").data("rate"),v=parseInt(c.noUiSlider.get()),h=d<v?d:v;c.noUiSlider.updateOptions({start:h,step:f,range:{min:s,max:d}});var g=s*u/100,b=d*u/100,_=h*u/100,y=f*u/100;l.noUiSlider.updateOptions({start:_,step:y,range:{min:g,max:b}}),m(),p(r,h)}}),f.slick({rows:0,slidesToScroll:1,variableWidth:!0,asNavFor:u,arrows:!1,focusOnSelect:!0}),u.slick({rows:0,slidesToShow:1,slidesToScroll:1,arrows:!1,asNavFor:f}),c.noUiSlider.on("update",function(t,n){s.textContent=d.to(+t[n]);var o=u.find(".slick-current"),a=e(o.children()[0]);p(a,t[n]),function(e,t){var n=e.find(".profit-object__rate").data("rate");l.noUiSlider.set(t*n/100)}(a,t[n])}),l.noUiSlider.on("slide",function(t,n){var o=u.find(".slick-current");!function(e,t){var n=e.find(".profit-object__rate").data("rate");c.noUiSlider.set(t/n*100)}(e(o.children()[0]),t[n])}),c.noUiSlider.on("change",function(){m()}),l.noUiSlider.on("change",function(){m()})}function p(e,t){var n=e.find(".profit-object__income"),o=e.find(".profit-object__share"),a=e.find(".profit-object__rate").data("rate"),i=e.data("step");o.text(Math.floor(t/i)),n.text(d.to(t*a/100/12))}function m(){var t=e(".noUi-connect"),n=e(".noUi-origin");t.addClass("transition"),n.addClass("transition"),setTimeout(function(){t.removeClass("transition"),n.removeClass("transition")},300)}}(),function(){var t=e(".project-calc");if(0!==t.length){var n=e(".project-calc__form"),o=t.find("input[data-format]"),a=t.find("input"),i=a.filter("[required]");a.each(function(t,a){e(a).on("change",function(e){_toConsumableArray(i).every(function(e){return e.value.trim().length>0})&&(_toConsumableArray(o).map(function(e){var t=e.value,n=e.dataset.format;if(t.length>0){var o=r[n].from(t);e.value=o}}),n.serialize(),_toConsumableArray(o).map(function(e){var t=parseInt(e.value),n=e.dataset.format;if(t){var o=r[n].to(t);e.value=o}}))})});var r={meter:wNumb({decimals:0,thousand:" ",suffix:" м²"}),ruble:wNumb({decimals:0,thousand:" ",suffix:" ₽"})};o.each(function(t,n){var o=e(n).data("format"),a=e(n).val()||"";e(n).on("input",function(t){var o=e(n).val();/^[0-9\s]*$/.test(o)?a=o:n.value=a}),e(n).on("blur",function(t){var a=parseInt(e(n).val().split(" ").join(""));a&&e(n).val(r[o].to(a))}),e(n).on("focus",function(t){var a=e(n).val();0!==a.length&&e(n).val(r[o].from(a))})})}}(),function(){var t=e(".project-select"),n=e(".project-select__option");function o(){var n=t.filter(".active");0!==n.length&&n.each(function(t,n){var o=e(n).find(".project-select__options");e(n).removeClass("active"),o.fadeOut(300)})}t.on("click",function(t){t.stopPropagation(),function(t,n){o(),e(t).addClass("active"),n.fadeIn(300)}(this,e(this).find(".project-select__options"))}),n.on("click",function(t){t.stopPropagation();var n=e(this).html(),o=e(this).parents(".project-select"),a=o.find(".project-select__options"),i=o.find(".project-select__selected"),r=o.find(".project-select__input");i.html(n),r.val(n),r.trigger("change"),function(t,n){e(t).removeClass("active"),n.fadeOut(300)}(o,a)}),e(document).on("click",function(){o()})}()}});