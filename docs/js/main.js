function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}jQuery;var API="/app/ajax/";Inputmask.extendDefinitions({f:{validator:"[0-7|9]"}});var phoneMask="+7 (f99) 999-99-99",scrollBarWidth=getScrollbarWidth();function getScrollbarWidth(){return window.innerWidth-document.documentElement.clientWidth}$.noConflict(),jQuery(document).ready(function(t){if(t("body").removeClass("pageload"),"function"!=typeof Promise)document.createElement("picture"),o="/js/polyfills/browser.js",a=r,(i=document.createElement("script")).src=o,i.onload=function(){a()},i.onerror=function(){throw new Error("Failed to load script "+o)},document.head.appendChild(i);else{var e=performance.now();r();var n=performance.now();console.log("globalInitFunction took "+Math.floor(n-e)+"ms.")}var o,a,i;function r(){t.fancybox.defaults.hash=!1;var e,n,o,a,i,r,c,s,l=function(t,e,n){var o;return function(){var a=this,i=arguments,r=n&&!o;clearTimeout(o),o=setTimeout(function(){o=null,n||t.apply(a,i)},e),r&&t.apply(a,i)}};function d(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{processData:!0,contentType:"application/x-www-form-urlencoded"};return new Promise(function(a,i){t.ajax({url:API+e,type:"POST",data:n,processData:o.processData,contentType:o.contentType,success:function(t){var e=function(t){var e;try{e=JSON.parse(t)}catch(t){}return e}(t);a(e)},error:function(t){i(t)}})})}function f(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t(e).offset().top;t("html, body").animate({scrollTop:a-o},n)}Inputmask.extendDefinitions({f:{validator:"[0-7|9]"}}),t("[data-scroll-to]").on("click",function(e){var n=t(this),o=n.data("scroll-to"),a=t("#".concat(o)),i=n.data("scroll-offset")||0;1===a.length&&f(a,300,i)}),e=t(".authorization__toggle"),n=t(".authorization__logged"),o=t(".authorization__list"),n.on("click",function(){e.toggleClass("active"),o.hasClass("active")?(o.slideUp(),o.removeClass("active")):(o.slideDown(),o.addClass("active"))}),a=t(".base-input__input"),i=t(".base-input-autocomplete"),a.each(function(){""!==t(this).val().trim()&&t(this).addClass("hasValue"),t(this).on("blur",function(){""!==t(this).val().trim()?t(this).addClass("hasValue"):t(this).removeClass("hasValue")})}),i.each(function(){var e=t(this).find("input"),n=t(this).find("label");e.on("focus",function(){n.addClass("js-focus")}),e.on("blur",function(){n.removeClass("js-focus")})}),r=t(".base-select__input"),c=t(".base-select__options-list"),s=t(".base-select__options-item"),0!=r.length&&(""!==r.val().trim()&&r.addClass("hasValue"),r.on("blur",function(){""!==r.val().trim()?r.addClass("hasValue"):r.removeClass("hasValue")}),r.on("click",function(){r.parent().addClass("active"),c.slideDown()}),t(document).on("click",function(t){r.parent().hasClass("active")&&t.target!==r&&0===r.parent().has(t.target).length&&(r.parent().removeClass("active"),c.slideUp())}),s.each(function(){t(this).on("click",function(e){var n=t(this).text();r.val(n),r.addClass("hasValue"),r.parent().removeClass("active"),c.slideUp()})})),function(){var e=t(".best-object-card");if(0!==e.length){var n=["#1cb96f","#fed63f","#ffa30c"];e.each(function(e,o){var a=parseInt(t(o).data("rate")),i=t(o).find(".best-object-card__rate");a>=80?i.css("color",n[0]):a<80&&a>=50?i.css("color",n[1]):i.css("color",n[2]),t(o).css("top","calc(".concat(100-a,"% + ").concat(8,"px"))})}}(),0!==t(".best-objects").length&&t(".best-objects__objects").slick({rows:0,slidesToScroll:1,slidesToShow:1,arrows:!0,mobileFirst:!0,infinite:!1,responsive:[{breakpoint:767,settings:{slidesToShow:2}},{breakpoint:1023,settings:{slidesToShow:2.25}},{breakpoint:1199,settings:{slidesToShow:3}}]}),0!==t(".contacts").length&&ymaps.ready(function(){var t=new ymaps.Map("map",{center:[55.749511,37.537083],zoom:15,controls:["zoomControl"]}),e=new ymaps.Placemark([55.749511,37.537083],{hintContent:"123112, Москва, Пресненская наб., д. 12, МФК «Федерация Восток»",balloonContent:"123112, Москва, Пресненская наб., д. 12, МФК «Федерация Восток»"},{preset:"islands#icon",iconColor:"#fed63f"});t.behaviors.disable("scrollZoom"),t.geoObjects.add(e)}),function(){if(0!==t(".faq").length){var e=t(".faq__questions-link"),n=t(".faq__answer"),o=t(".faq__content"),a=0;a=window.matchMedia("(max-width: 768px)").matches?50:150,e.on("click",function(i){i.preventDefault();var r=t(this);if(!r.hasClass("active")){var c=n.filter(".active"),s=e.filter(".active"),l=r.data("target"),d=n.filter("#"+l);s.removeClass("active"),c.fadeOut(300,function(){c.removeClass("active"),r.addClass("active"),d.addClass("active"),d.fadeIn(300),f(o,300,a)})}})}}();var u,p,v,h=document.querySelectorAll(".application-trigger");h.length>0&&h.forEach(function(e){e.addEventListener("click",function(e){MicroModal.show("applicationModal",{disableScroll:!0,awaitCloseAnimation:!0,onShow:function(e){!function(t){t.children[0].style.paddingRight=scrollBarWidth+"px",document.body.style.paddingRight=scrollBarWidth+"px"}(e),function(e){var n=e.querySelector(".modal__form"),o=n.querySelectorAll("input");console.log(o);t("#applicationEmail");var a=t("#applicationPhone"),i="+7 (f99) 999-99-99";a.inputmask({mask:i,showMaskOnHover:!1}),o.forEach(function(e){return e.addEventListener("focus",function(){return function(e){var n=t(e),o=n.siblings(".error");n.removeClass("error"),o.slideUp(200)}(e)})}),n.addEventListener("submit",function(e){if(e.preventDefault(),s=a.val(),!Inputmask.isValid(s,{mask:i}))return o="Неверно указан телефон",r=t(a),c=r.siblings(".error"),r.addClass("error"),c.text(o),void c.slideDown(200);var o,r,c,s,l=t(n).serialize();d("url",l).then(function(t){MicroModal.close("applicationModal")})})}(e)},onClose:function(t){!function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.children[0].style.paddingRight="",document.body.style.paddingRight="",e&&t.addEventListener("animationend",function t(){this.remove(),this.removeEventListener("animationend",t)})}(t,!1)}})})}),u=t(".main-header__navigation"),t(".hamburger").click(function(){t(this).toggleClass("active"),u.toggleClass("active"),t("body").toggleClass("menu-opened")}),0!==(p=t(".index-slider, .index-bottom__slider")).length&&p.each(function(e,n){t(n).slick({rows:0,slidesToScroll:1,slidesToShow:1,arrows:!0})}),v=t(".main-nav__link.has-subnav"),window.matchMedia("(max-width: 1024px)").matches&&v.on("click",function(e){e.preventDefault(),t(this).next().slideToggle(300)}),function(){if(document.querySelector(".object-calc")){var e=document.querySelector(".object-calc__investment-range"),n=document.querySelector(".object-calc__investment-value"),o=document.querySelector(".object-calc__income-range"),a=wNumb({decimals:0,suffix:" ₽",thousand:" "}),i=1e7,r=t(".object-calc__income-data"),c=r.find(".object-calc__income"),s=r.find(".object-calc__share"),l=r.find(".object-calc__rate").data("rate"),d=r.data("initial"),f=r.data("min"),u=r.data("max"),p=r.data("step"),v=r.data("liberty-step"),h=d>i?v:p;noUiSlider.create(e,{start:d,step:h,animate:!1,connect:"lower",range:{min:f,max:u}}),function(t,e,n,a,i){var r=t*i/100,c=e*i/100,s=a*i/100,l=n*i/100;noUiSlider.create(o,{start:s,step:l,animate:!1,range:{min:r,max:c}})}(f,u,h,d,l),e.noUiSlider.on("update",function(t,e){var i;n.textContent=a.to(+t[e]),i=t[e],s.text(Math.floor(i/h)),c.text(a.to(i*l/100/12)),function(t){o.noUiSlider.set(t*l/100)}(t[e])}),e.noUiSlider.on("set",function(t,n){!function(t){var n=t>i?v:p;console.log("step: ",n),e.noUiSlider.updateOptions({step:n},!1)}(+t[n])}),o.noUiSlider.on("slide",function(t,n){var o;o=t[n],e.noUiSlider.set(o/l*100)}),e.noUiSlider.on("change",function(){m()}),o.noUiSlider.on("change",function(){m()})}function m(){var e=t(".noUi-connect"),n=t(".noUi-origin");e.addClass("transition"),n.addClass("transition"),setTimeout(function(){e.removeClass("transition"),n.removeClass("transition")},300)}}(),tippy(".object-card__tooltip",{placement:"bottom",arrow:'<svg xmlns="http://www.w3.org/2000/svg" width="13" height="6" fill="none"><path d="M5.094 1.265a2 2 0 012.723 0L12.911 6H0l5.094-4.735z" fill="#fed63f"/></svg>'}),function(){if(0!==t(".object-finances").length){var e=document.querySelector(".object-finances__table"),n=document.querySelector("#lineChart"),o=parseInt(window.getComputedStyle(n.parentNode).paddingLeft),a=null,i=document.querySelector("#columnChart"),r=parseInt(window.getComputedStyle(i.parentNode).paddingLeft),c=null,s=e.querySelectorAll("tr:not(:first-child) td"),d=s[0].getBoundingClientRect().height,f=s[1].getBoundingClientRect().width;s[0].getBoundingClientRect().width;console.log(f);var u=document.querySelector(".object-finances__hr"),p=document.querySelector(".object-finances__vr"),v="12px",h=!1;window.matchMedia("(min-width: 1024px)").matches&&(v="14px",h=!0),s.forEach(function(t){t.addEventListener("mouseover",function(){var n=t.offsetParent.offsetTop+t.offsetTop+d;u.style.top="".concat(n,"px");var o=-5;1===_toConsumableArray(t.parentNode.children).indexOf(t)&&(o=parseInt(window.getComputedStyle(t).paddingLeft)-5);var a=t.offsetParent.offsetLeft+t.offsetLeft+o-e.scrollLeft;p.style.left="".concat(a,"px"),u.classList.add("active"),p.classList.add("active")}),t.addEventListener("mouseout",function(){u.classList.remove("active"),p.classList.remove("active")})});var m=document.querySelector(".object-finances__scroll-next"),g=document.querySelector(".object-finances__scroll-prev"),b=e.scrollWidth-e.clientWidth;console.log("maxScrollLeft: ",b);var _=l(function(){var t=e.scrollLeft+f;t>0&&g.classList.add("active");t>=b-f&&m.classList.remove("active");L(t)},200,!0),y=l(function(){var t=e.scrollLeft-f;L(t),t<=0&&g.classList.remove("active");t<=b&&m.classList.add("active")},200,!0);if(m.addEventListener("click",_),g.addEventListener("click",y),n){var w=[7,6.9,9.5,14.5,18.4,21.5,25.2,26.5,23.3,18.3,13.9,null],S=f,C=S*w.length;Highcharts.chart("lineChart",{chart:{type:"line",scrollablePlotArea:{minWidth:C},marginTop:60},title:!1,credits:{enabled:!1},xAxis:{categories:["Декабрь 2017","Январь 2018","Февраль 2018","Март 2018","Апрель 2018","Май 2018","Июнь 2018","Июль 2018","Август 2018","Сентябрь 2018","Октябрь 2018",""],opposite:!0,tickPixelInterval:S,width:S*w.length,gridLineColor:"#197F07",offset:30,lineWidth:0,tickWidth:0,labels:{align:"left",style:{color:"#9e9e9e",fontSize:v,fontWeight:"600",fontFamily:"Montserrat, Helvetica, Arial, sans-serif;",paddingLeft:"5px"}}},yAxis:{title:!1,gridLineColor:"#f2f2f2",labels:{padding:5,style:{color:"#9e9e9e",fontSize:v,fontWeight:"600",fontFamily:"Montserrat, Helvetica, Arial, sans-serif;",paddingLeft:"5px"}}},plotOptions:{line:{color:"#fed63f",dataLabels:{enabled:!1}},series:{point:{events:{mouseOver:function(t){var e=t.target;if(h){p.style.left="".concat(e.clientX+o+34-a.scrollLeft,"px"),p.classList.add("active")}},mouseOut:function(){p.classList.remove("active")}}}}},tooltip:{enabled:!1},series:[{data:w}],legend:!1}),a=n.querySelector(".highcharts-scrolling")}if(i){var x=[7,6.9,9.5,14.5,18.4,21.5,25.2,26.5,23.3,18.3,13.9,null],j=f,k=j*x.length;Highcharts.chart("columnChart",{chart:{type:"column",scrollablePlotArea:{minWidth:k},marginTop:60},title:!1,credits:{enabled:!1},xAxis:{categories:["Декабрь 2017","Январь 2018","Февраль 2018","Март 2018","Апрель 2018","Май 2018","Июнь 2018","Июль 2018","Август 2018","Сентябрь 2018","Октябрь 2018",""],opposite:!0,tickPixelInterval:j,width:j*x.length,offset:30,lineWidth:0,tickWidth:0,labels:{align:"left",style:{color:"#9e9e9e",fontSize:v,fontWeight:"600",fontFamily:"Montserrat, Helvetica, Arial, sans-serif;",paddingLeft:"5px"}}},yAxis:{title:!1,gridLineColor:"#f2f2f2",labels:{padding:5,style:{color:"#9e9e9e",fontSize:v,fontWeight:"600",fontFamily:"Montserrat, Helvetica, Arial, sans-serif;",paddingLeft:"5px"}}},plotOptions:{column:{color:"#d8d8d8",dataLabels:{enabled:!1},pointWidth:122,pointPlacement:.37}},tooltip:{enabled:!1},series:[{data:x,states:{hover:{color:"#fed63f"}},point:{events:{mouseOver:function(t){var e=t.target;if(h){p.style.left="".concat(e.clientX-e.pointWidth/2+r+41-c.scrollLeft,"px"),p.classList.add("active")}},mouseOut:function(){p.classList.remove("active")}}}}],legend:!1}),c=i.querySelector(".highcharts-scrolling")}}function L(t){e.scrollTo({left:t,behavior:"smooth"}),a.scrollTo({left:t,behavior:"smooth"}),c.scrollTo({left:t,behavior:"smooth"})}}(),0!==t(".object-location").length&&ymaps.ready(function(){var t=new ymaps.Map("map",{center:[55.749511,37.537083],zoom:15,controls:["zoomControl"]}),e=new ymaps.Placemark([55.749511,37.537083],{hintContent:"123112, Москва, Пресненская наб., д. 12, МФК «Федерация Восток»",balloonContent:"123112, Москва, Пресненская наб., д. 12, МФК «Федерация Восток»"},{preset:"islands#icon",iconColor:"#fed63f"});t.behaviors.disable("scrollZoom"),t.geoObjects.add(e)}),0!==t(".object-plans").length&&t(".object-plans__slider").slick({rows:0,slidesToScroll:1,slidesToShow:1,arrows:!0}),0!==t(".object-slider").length&&(t(".object-slider__slider").slick({rows:0,slidesToScroll:1,slidesToShow:1,arrows:!0}),t(".object-slider__play").modalVideo()),function(){if(0!==t(".object").length){var e=t(".object__navigation-link"),n=document.querySelectorAll(".object__section");if(window.matchMedia("(min-width: 768px)").matches){var o=new IntersectionObserver(function(t){t.forEach(function(t){if(t.isIntersecting){e.removeClass("active");var n=t.target.id;if(!n)return;e.filter("[data-scroll-to=".concat(n,"]")).addClass("active")}})},{rootMargin:"-50% 0% -50% 0%",root:null});n.forEach(function(t){return o.observe(t)})}e.on("click",function(n){n.preventDefault();var o=t(this);e.removeClass("active"),o.addClass("active")})}}(),function(){if(document.querySelector(".partners-wrapper")){var t=_toConsumableArray(document.querySelectorAll(".partners-wrapper__step")),e=[document.querySelector(".partners-choice"),document.querySelector(".partners-status"),document.querySelector(".partners-income")];!function(){var n={rootMargin:"0px 0px -90% 0px",root:null,threshold:0};if("IntersectionObserver"in window){var o=new IntersectionObserver(function(n){n.forEach(function(n){var o=n.isIntersecting;if(o){var a=e.indexOf(n.target),i=t.find(function(t){return t.classList.contains("active")}),r=t.indexOf(i);if(r===a)return;i.classList.remove("active");var c=t[a];c.classList.add("active")}})},{rootMargin:n.rootMargin,root:n.root,threshold:n.threshold});e.forEach(function(t){return o.observe(t)})}else setTimeout(function(){items.forEach(function(t){t.classList.add("animated")})},300)}()}}(),function(){var e=document.querySelector(".profit-calc");if(e){var n,o,a,i,r,c=document.querySelector(".profit-calc__investment-range"),s=document.querySelector(".profit-calc__investment-value"),l=document.querySelector(".profit-calc__income-range"),d=1e7,f=document.querySelector(".profit-calc__object-link"),u=wNumb({decimals:0,suffix:" ₽",thousand:" "}),p=t(".profit-calc__objects-nav"),v=t(".profit-calc__objects-slider"),h=1e6;n=t(t(e).find(".profit-object")[0]),o=n.data("min"),a=n.data("max"),i=n.data("step"),r=n.find(".profit-object__rate").data("rate"),noUiSlider.create(c,{start:h,step:i,animate:!1,connect:"lower",range:{min:o,max:a}}),m(n,h),function(t,e,n,o,a){var i=t*a/100,r=e*a/100,c=o*a/100,s=n*a/100;noUiSlider.create(l,{start:c,step:s,animate:!1,range:{min:i,max:r}})}(o,a,i,h,r),v.on("init",function(e,n){var o=t(n.$slides[n.currentSlide]),a=t(o.children()[0]);m(a,h),g(a)}),v.on("beforeChange",function(e,n,o,a){if(o!==a){var i=t(n.$slides[a]),r=t(i.children()[0]),s=r.data("min"),f=r.data("max"),u=r.find(".profit-object__rate").data("rate"),p=parseInt(c.noUiSlider.get()),v=p>d?r.data("libety-step"):r.data("step"),h=f<p?f:p;c.noUiSlider.updateOptions({start:h,step:v,range:{min:s,max:f}});var _=s*u/100,y=f*u/100,w=h*u/100,S=v*u/100;l.noUiSlider.updateOptions({start:w,step:S,range:{min:_,max:y}}),b(),m(r,h),g(r)}}),p.slick({rows:0,slidesToScroll:1,variableWidth:!0,asNavFor:v,arrows:!1,focusOnSelect:!0}),v.slick({rows:0,slidesToShow:1,slidesToScroll:1,arrows:!1,asNavFor:p}),c.noUiSlider.on("update",function(e,n){var o=+e[n];s.textContent=u.to(o);var a=v.find(".slick-current"),i=t(a.children()[0]);m(i,o),function(t,e){var n=t.find(".profit-object__rate").data("rate");l.noUiSlider.set(e*n/100)}(i,o),g(i)}),c.noUiSlider.on("set",function(e,n){var o=+e[n],a=v.find(".slick-current");!function(t,e){var n=t.data("step"),o=t.data("liberty-step"),a=e>d?o:n;console.log("step: ",a),c.noUiSlider.updateOptions({step:a},!1)}(t(a.children()[0]),o)}),l.noUiSlider.on("slide",function(e,n){var o=v.find(".slick-current");!function(t,e){var n=t.find(".profit-object__rate").data("rate");c.noUiSlider.set(e/n*100)}(t(o.children()[0]),e[n])}),c.noUiSlider.on("change",function(){b()}),l.noUiSlider.on("change",function(){b()})}function m(t,e){var n=t.find(".profit-object__income"),o=t.find(".profit-object__share"),a=t.find(".profit-object__rate").data("rate"),i=t.data("step"),r=t.data("liberty-step"),c=+e>d?r:i;o.text(Math.floor(e/c)),n.text(u.to(e*a/100/12))}function g(t){var e=parseInt(c.noUiSlider.get());f.href=t.data("link")+"/"+e}function b(){var e=t(".noUi-connect"),n=t(".noUi-origin");e.addClass("transition"),n.addClass("transition"),setTimeout(function(){e.removeClass("transition"),n.removeClass("transition")},300)}}(),function(){var e=t(".project-calc");if(0!==e.length){var n=t(".project-calc__form"),o=e.find("input[data-format]"),a=e.find("input"),i=a.filter("[required]");a.each(function(e,a){t(a).on("change",function(t){_toConsumableArray(i).every(function(t){return t.value.trim().length>0})&&(_toConsumableArray(o).map(function(t){var e=t.value,n=t.dataset.format;if(e.length>0){var o=r[n].from(e);t.value=o}}),n.serialize(),_toConsumableArray(o).map(function(t){var e=parseInt(t.value),n=t.dataset.format;if(e){var o=r[n].to(e);t.value=o}}))})});var r={meter:wNumb({decimals:0,thousand:" ",suffix:" м²"}),ruble:wNumb({decimals:0,thousand:" ",suffix:" ₽"})};o.each(function(e,n){var o=t(n).data("format"),a=t(n).val()||"";t(n).on("input",function(e){var o=t(n).val();/^[0-9\s]*$/.test(o)?a=o:n.value=a}),t(n).on("blur",function(e){var a=parseInt(t(n).val().split(" ").join(""));a&&t(n).val(r[o].to(a))}),t(n).on("focus",function(e){var a=t(n).val();0!==a.length&&t(n).val(r[o].from(a))})})}}(),function(){var e=t(".project-select"),n=t(".project-select__option"),o=e.filter('[data-type="taxType"]');function a(){var n=e.filter(".active");0!==n.length&&n.each(function(e,n){var o=t(n).find(".project-select__options");t(n).removeClass("active"),o.fadeOut(300)})}e.on("click",function(e){e.stopPropagation(),function(e,n){a(),t(e).addClass("active"),n.fadeIn(300)}(this,t(this).find(".project-select__options"))}),n.on("click",function(e){e.stopPropagation();var n=t(this).html(),a=t(this).parents(".project-select"),i=a.find(".project-select__options"),r=a.find(".project-select__selected"),c=a.find(".project-select__input");if(r.html(n),c.val(n),c.trigger("change"),"ownerType"===a.attr("id")){var s=t(this).attr("data-type");o.each(function(e,n){var o=t(n).find(".project-select__input"),a=t(n).find(".project-select__selected"),i=t(n).find(".project-select__option");"1"===s?(o.val(i[0].textContent),a.text(i[0].textContent)):(o.val(i[1].textContent),a.text(i[1].textContent))})}!function(e,n){t(e).removeClass("active"),n.fadeOut(300)}(a,i)}),t(document).on("click",function(){a()})}()}});